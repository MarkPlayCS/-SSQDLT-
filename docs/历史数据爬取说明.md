# 历史数据爬取功能说明

## 功能概述

本软件现在支持爬取从双色球和大乐透诞生之日起的所有历史开奖数据，为更准确的预测分析提供完整的数据基础。

## 彩票诞生日期

- **双色球**: 2003年2月23日
- **大乐透**: 2007年5月28日

## 数据量预估

- **双色球**: 约6000+期（从2003年至今）
- **大乐透**: 约6000+期（从2007年至今）

## 爬取方法

### 方法一：使用批处理脚本（推荐）

1. 双击运行 `爬取历史数据.bat`
2. 脚本会自动爬取所有历史数据
3. 数据会保存到数据库和CSV文件

### 方法二：使用命令行

```bash
# 爬取所有历史数据
python crawl_all_data.py

# 只爬取大乐透历史数据
python crawl_all_data.py DLT

# 只爬取双色球历史数据
python crawl_all_data.py SSQ
```

### 方法三：使用GUI界面

1. 启动软件：`python main.py`
2. 选择彩票类型（DLT或SSQ）
3. 点击"历史数据"按钮
4. 确认爬取操作

## 数据源

### 双色球数据源
1. **中国福彩网** (主要) - 官方数据源，数据最准确
2. 500彩票网 - 备用数据源
3. 新浪彩票 - 备用数据源
4. 网易彩票 - 备用数据源

### 大乐透数据源
1. 500彩票网 - 主要数据源
2. 新浪彩票 - 备用数据源
3. 网易彩票 - 备用数据源
4. 中国体彩网 - 备用数据源

## 数据存储

### 数据库存储
- 文件：`lottery_data.db`
- 表：`dlt_data`（大乐透）、`ssq_data`（双色球）
- 自动去重，避免重复数据

### CSV文件存储
- 大乐透：`DLT_historical_data_YYYYMMDD_HHMMSS.csv`
- 双色球：`SSQ_historical_data_YYYYMMDD_HHMMSS.csv`
- 包含时间戳，便于版本管理

## 爬取进度

### 实时反馈
- 显示当前爬取进度
- 显示已获取的数据量
- 显示预计剩余时间

### 错误处理
- 自动切换数据源
- 网络错误自动重试
- 数据格式验证

## 性能优化

### 并发处理
- 多线程爬取
- 智能请求间隔
- 避免服务器压力

### 内存管理
- 分批处理数据
- 及时释放内存
- 优化数据结构

## 数据质量

### 数据验证
- 号码范围检查
- 期号格式验证
- 日期格式统一

### 数据清洗
- 去除重复数据
- 修复格式错误
- 补充缺失信息

## 使用建议

### 网络环境
- 确保网络连接稳定
- 建议使用有线网络
- 避免网络高峰期爬取

### 时间安排
- 预计耗时：10-30分钟
- 建议在空闲时间进行
- 可以分批次爬取

### 存储空间
- 确保有足够磁盘空间
- 建议预留1GB以上空间
- 定期清理旧数据文件

## 故障排除

### 常见问题

1. **网络连接失败**
   - 检查网络连接
   - 尝试更换网络环境
   - 使用VPN（如需要）

2. **数据源访问失败**
   - 软件会自动切换数据源
   - 等待一段时间后重试
   - 检查防火墙设置

3. **数据格式错误**
   - 软件会自动修复常见格式问题
   - 生成模拟数据作为备选
   - 检查数据源网站是否更新

4. **存储空间不足**
   - 清理磁盘空间
   - 删除旧的CSV文件
   - 压缩数据库文件

### 错误日志
- 查看控制台输出
- 检查 `lottery_prediction.log` 文件
- 记录错误信息便于排查

## 数据使用

### 统计分析
- 使用完整历史数据进行频率分析
- 更准确的冷热号统计
- 更全面的趋势分析

### 机器学习
- 更多训练数据提高模型精度
- 更长的历史序列用于深度学习
- 更丰富的特征工程

### 预测分析
- 基于完整数据的预测更可靠
- 多模型融合效果更好
- 预测结果更稳定

## 注意事项

### 法律合规
- 仅用于学习和研究
- 遵守网站使用条款
- 合理控制爬取频率

### 数据准确性
- 以官方数据源为准
- 定期更新数据
- 验证数据完整性

### 系统资源
- 监控CPU和内存使用
- 避免长时间占用资源
- 适时重启系统

## 更新维护

### 定期更新
- 建议每周更新一次数据
- 关注数据源变化
- 及时修复爬虫问题

### 版本管理
- 保留历史数据文件
- 记录数据更新日志
- 备份重要数据

## 技术支持

### 问题反馈
- 记录详细的错误信息
- 提供系统环境信息
- 描述复现步骤

### 功能建议
- 欢迎提出改进建议
- 分享使用经验
- 参与功能讨论

---

**免责声明**: 本功能仅供学习和研究使用，请遵守相关法律法规和网站使用条款。使用本功能产生的任何问题，开发者不承担责任。
